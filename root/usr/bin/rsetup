#!/bin/bash

LC_ALL="C"
LANG="C"
LANGUAGE="C"

if git status &>/dev/null && [[ -f "$PWD/root/usr/bin/rsetup" ]]
then
    ROOT_PATH="${ROOT_PATH:-"$PWD/root"}"
else
    ROOT_PATH="${ROOT_PATH:-"/"}"
fi

source "$ROOT_PATH/lib/rsetup/cli/main.sh"

if (( $# == 0 )) || [[ $1 == main ]]
then
    source "$ROOT_PATH/lib/rsetup/tui/main.sh"
    tui_start __tui_main
else
    __parameter_type_check "$1" "function"

    set -e
    "$@"
fi
